#!/usr/bin/env node
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const fs_1 = require("fs");
const path_1 = require("path");
const index_1 = require("./index");
const yargs = require("yargs");
yargs
    .scriptName("k6-to-junit")
    .usage("Usage: $0 [options]")
    .command("$0 [out]", "", yargs => {
    yargs.positional("o", {
        alias: "out",
        desc: "the output file",
        type: "string"
    });
}, (argv) => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
    const k6Parser = new index_1.default();
    const output = argv.o && process.stdout;
    yield k6Parser.pipeFrom(process.stdin, { output });
    const writer = argv.o ? fs_1.createWriteStream(path_1.normalize(argv.o)) : process.stdout;
    k6Parser.toXml(writer);
    writer.once("finish", () => {
        process.exit(k6Parser.allPassed() ? 0 : 99);
    });
}))
    .help().argv;
//# sourceMappingURL=command.js.map